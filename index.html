<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProebalStars</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <style>
        /* –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ */
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background: var(--tg-theme-bg-color, #ffffff);
            color: var(--tg-theme-text-color, #000000);
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –≤–∫–ª–∞–¥–æ–∫ */
        .content {
            display: none;
            padding: 20px;
            min-height: 100vh;
            box-sizing: border-box;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ä–µ–π—Ç–∏–Ω–≥–∞ */
        .rating-container {
            max-width: 600px;
            margin: 0 auto;
            padding: 10px;
            padding-bottom: 120px; /* –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π –æ—Ç—Å—Ç—É–ø –¥–ª—è –º–µ–Ω—é –∏ –±–ª–æ–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è */
        }

        .rating-header {
            text-align: center;
            margin-bottom: 15px;
            padding: 10px;
            background: var(--tg-theme-bg-color);
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .rating-header h2 {
            margin: 0;
            font-size: 20px;
        }

        .rating-wrapper {
            background: transparent;
            box-shadow: none;
        }

        .rating-item {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            margin: 6px 0;
            background: var(--tg-theme-bg-color);
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            transition: transform 0.2s;
        }

        .rating-item:hover {
            transform: translateX(2px);
        }

        .rating-position {
            width: 24px;
            text-align: center;
            font-weight: bold;
            font-size: 14px;
            color: var(--tg-theme-hint-color);
        }

        .rating-medal {
            width: 30px;
            text-align: center;
            font-size: 18px;
        }

        .rating-info {
            flex: 1;
            margin-left: 10px;
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .rating-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .rating-stats {
            display: flex;
            gap: 8px;
            font-size: 12px;
            color: var(--tg-theme-hint-color);
        }

        .rating-stat {
            display: flex;
            align-items: center;
            gap: 4px;
            background: var(--tg-theme-secondary-bg-color);
            padding: 3px 6px;
            border-radius: 6px;
        }

        .rating-total {
            font-weight: 600;
            color: var(--tg-theme-button-color);
            font-size: 14px;
            padding: 4px 8px;
            background: var(--tg-theme-secondary-bg-color);
            border-radius: 6px;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –ø–µ—Ä–≤—ã—Ö —Ç—Ä–µ—Ö –º–µ—Å—Ç */
        .rating-item:nth-child(1) {
            background: linear-gradient(to right, var(--tg-theme-bg-color), rgba(255, 215, 0, 0.1));
        }

        .rating-item:nth-child(2) {
            background: linear-gradient(to right, var(--tg-theme-bg-color), rgba(192, 192, 192, 0.1));
        }

        .rating-item:nth-child(3) {
            background: linear-gradient(to right, var(--tg-theme-bg-color), rgba(205, 127, 50, 0.1));
        }

        /* –ù–∞–≤–∏–≥–∞—Ü–∏—è */
        .nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-around;
            padding: 8px;
            background: var(--tg-theme-bg-color);
            border-top: 1px solid rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            z-index: 1000;
        }

        .nav-button {
            border: none;
            background: none;
            padding: 8px;
            color: var(--tg-theme-hint-color);
            cursor: pointer;
            font-size: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            transition: color 0.2s;
            width: 33.33%;
        }

        .nav-button.active {
            color: var(--tg-theme-button-color);
        }

        .nav-button-icon {
            font-size: 20px;
            margin-bottom: 2px;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∏–≥—Ä—ã */
        .game-container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            text-align: center;
        }

        .game-header {
            margin-bottom: 30px;
        }

        .game-header h2 {
            margin: 0;
            margin-bottom: 10px;
            font-size: 24px;
        }

        .game-description {
            color: var(--tg-theme-hint-color);
            margin: 0;
        }

        .timer-container {
            margin: 30px 0;
        }

        .timer-circle {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--tg-theme-bg-color);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            position: relative;
        }

        .timer-circle::after {
            content: '';
            position: absolute;
            top: -5px;
            left: -5px;
            right: -5px;
            bottom: -5px;
            border-radius: 50%;
            border: 2px solid var(--tg-theme-button-color);
            opacity: 0.5;
        }

        .timer-value {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .timer-value #gameTime {
            font-size: 48px;
            font-weight: bold;
            color: var(--tg-theme-button-color);
            line-height: 1;
        }

        .timer-label {
            font-size: 14px;
            color: var(--tg-theme-hint-color);
            display: block;
        }

        .game-button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 15px 30px;
            background: var(--tg-theme-button-color);
            color: var(--tg-theme-button-text-color);
            border: none;
            border-radius: 12px;
            font-size: 16px;
            cursor: pointer;
            transition: transform 0.2s, background 0.2s;
        }

        .game-button:active {
            transform: scale(0.98);
        }

        .game-button-icon {
            margin-right: 10px;
            font-size: 20px;
        }

        .game-stats {
            display: flex;
            gap: 15px;
            margin: 30px 0;
            justify-content: center;
        }

        .stat-card {
            flex: 1;
            max-width: 200px;
            background: var(--tg-theme-bg-color);
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .stat-icon {
            font-size: 24px;
        }

        .stat-info {
            text-align: left;
            flex: 1;
        }

        .stat-label {
            font-size: 12px;
            color: var(--tg-theme-hint-color);
            margin-bottom: 4px;
        }

        .stat-value {
            font-size: 16px;
            font-weight: bold;
            color: var(--tg-theme-text-color);
        }

        .game-info {
            margin-top: 30px;
        }

        .info-text {
            color: var(--tg-theme-text-color);
            margin: 10px 0;
        }

        .telegram-note {
            color: var(--tg-theme-hint-color);
            font-size: 14px;
            margin-top: 15px;
        }

        /* –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–π –∏–≥—Ä—ã */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        .game-active .timer-circle {
            animation: pulse 2s infinite;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        }

        .game-active .timer-circle::after {
            border-color: #ff4444;
            opacity: 0.8;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã "–û –Ω–∞—Å" */
        .about-container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            padding-bottom: 70px;
        }

        .about-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .about-header h2 {
            margin: 0;
            font-size: 24px;
            color: var(--tg-theme-text-color);
        }

        .about-section {
            background: var(--tg-theme-bg-color);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .about-section h3 {
            margin: 0 0 15px 0;
            font-size: 18px;
            color: var(--tg-theme-text-color);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .about-section p {
            margin: 0;
            line-height: 1.5;
            color: var(--tg-theme-text-color);
        }

        .features-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .features-list li {
            display: flex;
            align-items: center;
            padding: 10px 0;
            gap: 10px;
            color: var(--tg-theme-text-color);
        }

        .features-list li:not(:last-child) {
            border-bottom: 1px solid var(--tg-theme-hint-color, rgba(0,0,0,0.1));
        }

        .channel-link {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            background: var(--tg-theme-button-color);
            color: var(--tg-theme-button-text-color);
            text-decoration: none;
            padding: 12px 20px;
            border-radius: 10px;
            margin-top: 20px;
            font-weight: 500;
            transition: transform 0.2s;
        }

        .channel-link:active {
            transform: scale(0.98);
        }

        .bonus-section {
            background: linear-gradient(to right, var(--tg-theme-bg-color), rgba(255, 215, 0, 0.1));
            border-radius: 12px;
            padding: 20px;
            margin-top: 30px;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –±–ª–æ–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è */
        .current-user {
            position: fixed;
            bottom: 60px; /* –û—Ç—Å—Ç—É–ø –æ—Ç –º–µ–Ω—é */
            left: 0;
            right: 0;
            padding: 10px;
            background: var(--tg-theme-bg-color);
            border-top: 1px solid rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            z-index: 999;
        }

        .current-user-content {
            max-width: 600px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            padding: 8px 15px;
            background: var(--tg-theme-secondary-bg-color);
            border-radius: 10px;
        }

        .current-user-info {
            flex: 1;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .current-user-position {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--tg-theme-hint-color);
            font-size: 13px;
        }

        .current-user-medal {
            font-size: 16px;
        }

        .current-user-name {
            font-weight: 600;
            color: var(--tg-theme-text-color);
        }

        .current-user-stars {
            background: var(--tg-theme-bg-color);
            padding: 4px 8px;
            border-radius: 6px;
            color: var(--tg-theme-hint-color);
            font-size: 13px;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ç–∞–π–º–µ—Ä–∞ */
        .timer-container {
            margin-bottom: 20px;
        }

        .timer-circle {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: var(--tg-theme-bg-color);
            position: relative;
            margin: 0 auto;
        }

        .timer-value {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 24px;
            font-weight: bold;
        }

        .timer-label {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 12px;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ */
        .game-stats {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
        }

        .stat-card {
            text-align: center;
            padding: 10px;
            border-radius: 10px;
            background: var(--tg-theme-secondary-bg-color);
            flex: 1;
            margin: 0 10px;
        }

        .stat-icon {
            font-size: 24px;
            margin-bottom: 10px;
        }

        .stat-info {
            display: flex;
            flex-direction: column;
        }

        .stat-label {
            font-size: 12px;
            color: var(--tg-theme-hint-color);
        }

        .stat-value {
            font-size: 16px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <!-- –í–∫–ª–∞–¥–∫–∞ "–†–µ–π—Ç–∏–Ω–≥" -->
    <div id="rating" class="content">
        <div class="rating-container">
            <div class="rating-header">
                <h2>–†–µ–π—Ç–∏–Ω–≥ –ø—Ä–æ—ë–±—ã–≤–∞—Ç–µ–ª–µ–π</h2>
            </div>
            <div class="rating-wrapper">
                <div id="ratingList">
                    <!-- –°—é–¥–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —ç–ª–µ–º–µ–Ω—Ç—ã —Ä–µ–π—Ç–∏–Ω–≥–∞ -->
                </div>
            </div>
        </div>
    </div>

    <!-- –í–∫–ª–∞–¥–∫–∞ "–ò–≥—Ä–∞" -->
    <div id="game" class="content">
        <div class="game-container">
            <div class="game-header">
                <h2>‚è± –ü–æ—ë–± –≤—Ä–µ–º–µ–Ω–∏</h2>
                <p class="game-description">–ü—Ä–æ–µ–±—ã–≤–∞–π –≤—Ä–µ–º—è –∏ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π Stars!</p>
            </div>

            <div class="timer-container">
                <div class="timer-circle">
                    <div class="timer-value">
                        <div id="gameTime">0</div>
                    </div>
                    <div class="timer-label">–°–µ–∫</div>

                </div>
            </div>

            <button class="game-button" onclick="toggleGame()" id="gameButton">
                <span class="game-button-icon">‚ñ∂Ô∏è</span>
                <span class="game-button-text">–ù–∞—á–∞—Ç—å –ø—Ä–æ—ë–± –≤—Ä–µ–º–µ–Ω–∏</span>
            </button>

            <div class="game-stats">
                <div class="stat-card">
                    <div class="stat-icon">üèÜ</div>
                    <div class="stat-info">
                        <div class="stat-label">–†–µ–∫–æ—Ä–¥ —Å–µ—Å—Å–∏–∏</div>
                        <div class="stat-value"><span id="gameRecord">0</span></div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚≠êÔ∏è</div>
                    <div class="stat-info">
                        <div class="stat-label">–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ Stars</div>
                        <div class="stat-value"><span id="earnedStars">0</span></div>
                    </div>
                </div>
            </div>

            <div class="game-info">
                <p class="info-text">üåü Stars –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ –æ–±—â–∏–π —Ä–µ–π—Ç–∏–Ω–≥!</p>
                <p class="telegram-note">üì± –î–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è Stars –æ—Ç–∫—Ä–æ–π—Ç–µ –∏–≥—Ä—É —á–µ—Ä–µ–∑ Telegram</p>
            </div>
        </div>
    </div>

    <!-- –í–∫–ª–∞–¥–∫–∞ "–û –Ω–∞—Å" -->
    <div id="about" class="content">
        <div class="about-container">
            <div class="about-header">
                <h2>üåü –û –ø—Ä–æ–µ–∫—Ç–µ ProebalStars</h2>
            </div>

            <div class="about-section">
                <h3>‚≠êÔ∏è –ß—Ç–æ —Ç–∞–∫–æ–µ Stars?</h3>
                <p>Stars - —ç—Ç–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –≤–∞–ª—é—Ç–∞ Telegram, –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –∑–∞ –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ Telegram Premium. –û–±—ã—á–Ω–æ Stars –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∫–∞–Ω–∞–ª–æ–≤ –∏ –±–æ—Ç–æ–≤, –Ω–æ –º—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º –±–æ–ª–µ–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Å–ø–æ—Å–æ–± –∏—Ö –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è! üòé</p>
            </div>

            <div class="about-section">
                <h3>üí´ –ó–∞—á–µ–º –ø—Ä–æ–µ–±—ã–≤–∞—Ç—å Stars?</h3>
                <ul class="features-list">
                    <li>üëë –î–ª—è –ø–æ–ø–∞–¥–∞–Ω–∏—è –≤ —ç–ª–∏—Ç–Ω—ã–π –∫–ª—É–± –ø—Ä–æ—ë–±—ã–≤–∞—Ç–µ–ª–µ–π</li>
                    <li>üìú –†–∞–¥–∏ –ø–æ–ª—É—á–µ–Ω–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–π —Å–ø—Ä–∞–≤–∫–∏</li>
                    <li>üåü –ß—Ç–æ–±—ã –≤–æ–π—Ç–∏ –≤ –∏—Å—Ç–æ—Ä–∏—é Telegram</li>
                    <li>üéÅ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å—Ç–∞—Ç—å —á–∞—Å—Ç—å—é —Ç–∞–π–Ω–æ–≥–æ –∫–æ–º—å—é–Ω–∏—Ç–∏</li>
                    <li>üí™ –ü—Ä–æ—Å—Ç–æ –ø–æ—Ç–æ–º—É —á—Ç–æ –º–æ–∂–µ–º!</li>
                </ul>
            </div>

            <div class="bonus-section">
                <h3>üéÅ –°–µ–∫—Ä–µ—Ç–Ω—ã–π –±–æ–Ω—É—Å!</h3>
                <p>–ü—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –≤—ã—Å–æ–∫–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∫–æ–º—å—é–Ω–∏—Ç–∏ –∏ –±–æ–ª—å—à–æ–≥–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞ –∫ –ø—Ä–æ–µ–∫—Ç—É, –º—ã –ø–ª–∞–Ω–∏—Ä—É–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç—å airdrop —Ç–∞–π–Ω–æ–π –º–æ–Ω–µ—Ç—ã –¥–ª—è —Å–∞–º—ã—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤!</p>
            </div>

            <a href="https://t.me/proebalstars" class="channel-link" target="_blank">
                <span>üì¢ –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫–∞–Ω–∞–ª</span>
                <span>@proebalstars</span>
            </a>
        </div>
    </div>

    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <div class="nav">
        <button class="nav-button" onclick="showTab('rating')">
            <span class="nav-button-icon">üèÜ</span>
            <span>–†–µ–π—Ç–∏–Ω–≥</span>
        </button>
        <button class="nav-button active" onclick="showTab('game')">
            <span class="nav-button-icon">‚è±</span>
            <span>–í—Ä–µ–º—è</span>
        </button>
        <button class="nav-button" onclick="showTab('about')">
            <span class="nav-button-icon">‚ÑπÔ∏è</span>
            <span>–û –Ω–∞—Å</span>
        </button>
    </div>

    <!-- –ë–ª–æ–∫ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
    <div class="current-user" id="currentUser" style="display: none;">
        <div class="current-user-content">
            <div class="current-user-info">
                <div class="current-user-position">
                    <span class="current-user-medal"></span>
                    <span class="current-user-name"></span>
                </div>
                <div class="current-user-stats">
                    <div class="rating-total"></div>
                    <div class="rating-stats">
                        <div class="rating-stat">
                            <span>üí∞</span>
                            <span class="current-user-bought"></span>
                        </div>
                        <div class="rating-stat">
                            <span>‚è±</span>
                            <span class="current-user-earned"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
        const tg = window.Telegram.WebApp;
        tg.expand();

        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –±–∞–∑–æ–≤—ã–π URL –¥–ª—è API
        const API_BASE_URL = 'http://localhost:8080'; // –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
        // const API_BASE_URL = 'https://your-domain.com'; // –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

        // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∫–ª–∞–¥–æ–∫
        function showTab(tabId) {
            console.log('–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É:', tabId);

            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏
            document.querySelectorAll('.content').forEach(tab => {
                tab.style.display = 'none';
            });

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
            const selectedTab = document.getElementById(tabId);
            if (selectedTab) {
                selectedTab.style.display = 'block';
            }

            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É
            document.querySelectorAll('.nav-button').forEach(btn => {
                btn.classList.remove('active');
            });

            const activeBtn = document.querySelector(`.nav-button[onclick="showTab('${tabId}')"]`);
            if (activeBtn) {
                activeBtn.classList.add('active');
            }

            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ä–µ–π—Ç–∏–Ω–≥ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É —Ä–µ–π—Ç–∏–Ω–≥–∞
            if (tabId === 'rating') {
                loadRating();
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ–π—Ç–∏–Ω–≥–∞
        async function loadRating() {
            const ratingList = document.getElementById('ratingList');
            const currentUser = document.getElementById('currentUser');
            if (!ratingList) {
                console.error('–≠–ª–µ–º–µ–Ω—Ç ratingList –Ω–µ –Ω–∞–π–¥–µ–Ω');
                return;
            }

            try {
                ratingList.innerHTML = '<div class="rating-loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞...</div>';

                const response = await fetch(`${API_BASE_URL}/api/get_rating`);
                const data = await response.json();

                console.log('–ü–æ–ª—É—á–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ —Ä–µ–π—Ç–∏–Ω–≥–∞:', data);

                if (!data.top_users || !Array.isArray(data.top_users)) {
                    throw new Error('–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ä–µ–π—Ç–∏–Ω–≥–∞');
                }

                let html = '';
                let currentUserPosition = -1;
                let currentUserData = null;

                // –ï—Å–ª–∏ –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ –æ —Ç–µ–∫—É—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –∏–∑ Telegram
                const currentTgUser = tg.initDataUnsafe?.user;

                if (data.top_users.length > 0) {
                    data.top_users.forEach((user, index) => {
                        const position = index + 1;
                        const medal = position <= 3 ? ['ü•á','ü•à','ü•â'][position-1] : 'üëë';

                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —ç—Ç–æ —Ç–µ–∫—É—â–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
                        if (currentTgUser && user[0] === currentTgUser.username) {
                            currentUserPosition = position;
                            currentUserData = user;
                        }

                        html += `
                            <div class="rating-item">
                                <div class="rating-position">${position}</div>
                                <div class="rating-medal">${medal}</div>
                                <div class="rating-info">
                                    <div class="rating-top">
                                        <div class="rating-username">${user[0]}</div>
                                        <div class="rating-total">${parseFloat((user[2] || 0) + (user[3] || 0)).toFixed(1)}‚≠êÔ∏è</div>
                                    </div>
                                    <div class="rating-stats">
                                        <div class="rating-stat">
                                            <span>üí∞</span>
                                            <span>${parseFloat(user[2] || 0).toFixed(1)}</span>
                                        </div>
                                        <div class="rating-stat">
                                            <span>‚è±</span>
                                            <span>${parseFloat(user[3] || 0).toFixed(1)}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;
                    });
                } else {
                    html = '<div class="rating-empty">üò¥ –ü–æ–∫–∞ –Ω–∏–∫—Ç–æ –Ω–µ –ø—Ä–æ–µ–±–∞–ª –Ω–∏ –æ–¥–Ω–æ–π Stars!</div>';
                }

                ratingList.innerHTML = html;

                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ–∫—É—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
                if (currentUserPosition !== -1 && currentUserData) {
                    currentUser.style.display = 'block';
                    const medal = currentUserPosition <= 3 ? ['ü•á','ü•à','ü•â'][currentUserPosition-1] : 'üëë';

                    currentUser.querySelector('.current-user-medal').textContent = medal;
                    currentUser.querySelector('.current-user-name').textContent =
                        `${currentUserPosition}. ${currentUserData[0]}`;
                    currentUser.querySelector('.rating-total').textContent =
                        `${parseFloat((currentUserData[2] || 0) + (currentUserData[3] || 0)).toFixed(1)}‚≠êÔ∏è`;
                    currentUser.querySelector('.current-user-bought').textContent =
                        parseFloat(currentUserData[2] || 0).toFixed(1);
                    currentUser.querySelector('.current-user-earned').textContent =
                        parseFloat(currentUserData[3] || 0).toFixed(1);
                } else {
                    currentUser.style.display = 'none';
                }

            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ–π—Ç–∏–Ω–≥–∞:', error);
                ratingList.innerHTML = '<div class="rating-error">‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ–π—Ç–∏–Ω–≥–∞</div>';
                currentUser.style.display = 'none';
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', () => {
            showTab('game'); // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤–∫–ª–∞–¥–∫—É –∏–≥—Ä—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        });

        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –∏–≥—Ä—ã
        let gameInterval;
        let gameTime = 0;
        let gameRecord = 0;

        // –î–æ–±–∞–≤–∏–º —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        function showNotification(message) {
            tg.showPopup({
                title: 'üí´ –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ Stars',
                message: message,
                buttons: [{type: 'ok'}]
            });
        }

        // –û–±–Ω–æ–≤–∏–º —Ñ—É–Ω–∫—Ü–∏—é toggleGame
        function toggleGame() {
            const button = document.getElementById('gameButton');
            const buttonText = button.querySelector('.game-button-text');
            const buttonIcon = button.querySelector('.game-button-icon');
            const gameContainer = document.querySelector('.game-container');

            if (gameInterval) {
                // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–≥—Ä—É
                clearInterval(gameInterval);
                gameInterval = null;
                buttonText.textContent = '–ù–∞—á–∞—Ç—å –ø—Ä–æ—ë–± –≤—Ä–µ–º–µ–Ω–∏';
                buttonIcon.textContent = '‚ñ∂Ô∏è';
                gameContainer.classList.remove('game-active');

                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∫–æ—Ä–¥
                if (gameTime > gameRecord) {
                    gameRecord = gameTime;
                    localStorage.setItem('gameRecord', gameRecord);
                    document.getElementById('gameRecord').textContent = gameRecord;
                    showConfetti();
                }

                gameTime = 0;
                document.getElementById('gameTime').textContent = gameTime;
                document.getElementById('earnedStars').textContent = '0.0000';
            } else {
                // –ó–∞–ø—É—Å–∫–∞–µ–º –∏–≥—Ä—É
                buttonText.textContent = '–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—ë–±';
                buttonIcon.textContent = '‚èπ';
                gameContainer.classList.add('game-active');
                document.getElementById('earnedStars').textContent = '0.0000';

                let lastRewardTime = 0; // –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è Stars

                gameInterval = setInterval(() => {
                    gameTime++;
                    document.getElementById('gameTime').textContent = gameTime;

                    // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—É—â–∏—Ö Stars
                    const currentStars = (gameTime * 0.0001).toFixed(4);
                    document.getElementById('earnedStars').textContent = currentStars;

                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø—Ä–æ—à–ª–æ –ª–∏ 60 —Å–µ–∫—É–Ω–¥ —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è
                    if (gameTime - lastRewardTime >= 60) {
                        const earnedStars = 0.006; // 60 * 0.0001
                        lastRewardTime = gameTime;

                        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ Stars
                        if (tg.initDataUnsafe?.user?.id) {
                            fetch(`${API_BASE_URL}/api/add_time_stars`, {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json',
                                },
                                body: JSON.stringify({
                                    user_id: tg.initDataUnsafe.user.id,
                                    username: tg.initDataUnsafe.user.username,
                                    stars: earnedStars
                                })
                            }).then(response => response.json())
                            .then(data => {
                                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–∏
                                showNotification(`–ù–∞—á–∏—Å–ª–µ–Ω–æ ${earnedStars} Stars –∑–∞ –ø—Ä–æ—ë–± –≤—Ä–µ–º–µ–Ω–∏! üéâ`);
                            })
                            .catch(error => {
                                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ Stars:', error);
                            });
                        }
                    }
                }, 1000);
            }
        }

        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ä–µ–∫–æ—Ä–¥ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
        const savedRecord = localStorage.getItem('gameRecord');
        if (savedRecord) {
            gameRecord = parseInt(savedRecord);
            document.getElementById('gameRecord').textContent = gameRecord;
        }
    </script>
</body>
</html>